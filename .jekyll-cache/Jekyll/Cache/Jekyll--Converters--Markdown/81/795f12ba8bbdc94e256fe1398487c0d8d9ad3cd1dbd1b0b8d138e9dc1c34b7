I"‰
<p>åœ¨Railsåº”ç”¨ä¸­ï¼Œå®ç°å‚æ•°é…ç½®çš„åŠŸèƒ½ï¼Œå¦‚æœä¸éœ€è¦åœ¨æä¾›ä¿®æ”¹æ¥å£çš„è¯ï¼Œä¸éœ€è¦ç”¨ä¸Šrails-settings-cachedè¿™ç±»Gemï¼Œä½¿ç”¨Railså†…ç½®çš„APIå³å¯æ»¡è¶³åŸºæœ¬éœ€æ±‚ã€‚</p>

<p>åœ¨3ä¸ªåœ°æ–¹å¯ä»¥é…ç½®å‚æ•°:</p>

<ul>
  <li>config/application.rb</li>
  <li>config/environments/*.rb</li>
  <li>
    <p>config/initializers/*.rb</p>

    <p># config/environments/development.rb</p>

    <p>Rails.application.configure do
    config.allow_user_register = true
  end</p>

    <p># config/application.rb
  module ApplicationName
      class Application &lt; Rails::Application
          config.load_defaults 6.1
          config.allow_user_register = true
      end
  end</p>
  </li>
</ul>

<p>é€šè¿‡ Rails.application.config æˆ–è€… Rails.configuration è¯»å–é…ç½®çš„å‚æ•°ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.configuration.allow_user_register  # =ã€‹ true
</code></pre></div></div>

<h2 id="åµŒå¥—é…ç½®å‚æ•°">åµŒå¥—é…ç½®å‚æ•°</h2>

<p>ä½¿ç”¨ Railsä¸­çš„ config.x å¯ä»¥å­˜å‚¨åµŒå¥—çš„å‚æ•°ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config.x.payment_processing.schedule = :daily
config.x.payment_processing.retries  = 3
config.super_debugger = true
</code></pre></div></div>

<p>è¯»å–è¿™äº›å‚æ•°ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.configuration.x.payment_processing.schedule # =&gt; :daily
Rails.configuration.x.payment_processing.retries  # =&gt; 3
Rails.configuration.x.payment_processing.not_set  # =&gt; nil
Rails.configuration.super_debugger                # =&gt; true	
</code></pre></div></div>

<p>ä½¿ç”¨ Rails::Application.config_for æ–¹æ³•ä» yaml æ–‡ä»¶ä¸­è¯»å–é…ç½®ä¿¡æ¯ã€‚</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># config/payment.yml:
production:
  environment: production
  merchant_id: production_merchant_id
  public_key:  production_public_key
  private_key: production_private_key

development:
  environment: sandbox
  merchant_id: development_merchant_id
  public_key:  development_public_key
  private_key: development_private_key



# config/application.rb
module MyApp
  class Application &lt; Rails::Application
	config.payment = config_for(:payment)
  end
end
</code></pre></div></div>

<p>è¯»å–å‚æ•°ï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Rails.configuration.payment['merchant_id'] # =&gt; production_merchant_id or development_merchant_id	
</code></pre></div></div>
:ET